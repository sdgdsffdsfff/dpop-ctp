define("esui/helper/dom",["require","underscore","../lib","../main"],function(require){function e(e){var t=e.styleType||e.type;return t.toLowerCase()}function t(){return[].slice.call(arguments,0).join("-")}var i=require("underscore"),n=require("../lib"),a=require("../main"),o={};o.getPartClasses=function(i){if(i&&this.partClassCache&&this.partClassCache.hasOwnProperty(i))return this.partClassCache[i].slice();var n=e(this.control),o=this.control.skin,r=a.getConfig("uiClassPrefix"),s=a.getConfig("skinClassPrefix"),l=[];if(i){if(l.push(t(r,n,i)),o)l.push(t(s,o,n,i));if(!this.partClassCache)this.partClassCache={},this.partClassCache[i]=l.slice()}else if(l.push(t(r,"ctrl")),l.push(t(r,n)),o)l.push(t(s,o),t(s,o,n));return l},o.getPartClassName=function(e){return this.getPartClasses(e).join(" ")},o.getPrimaryClassName=function(i){var n=e(this.control);if(i)return t(a.getConfig("uiClassPrefix"),n,i);else return t(a.getConfig("uiClassPrefix"),n)},o.addPartClasses=function(e,t){if("string"==typeof t)t=this.getPart(t);if(t=t||this.control.main)n.addClasses(t,this.getPartClasses(e))},o.removePartClasses=function(e,t){if("string"==typeof t)t=this.getPart(t);if(t=t||this.control.main)n.removeClasses(t,this.getPartClasses(e))},o.getStateClasses=function(i){if(this.stateClassCache&&this.stateClassCache.hasOwnProperty(i))return this.stateClassCache[i].slice();var n=e(this.control),o=a.getConfig,r=[t(o("uiClassPrefix"),n,i),t(o("stateClassPrefix"),i)],s=this.control.skin;if(s){var l=o("skinClassPrefix");r.push(t(l,s,i),t(l,s,n,i))}if(!this.stateClassCache)this.stateClassCache={},this.stateClassCache[i]=r.slice();return r},o.addStateClasses=function(e){var t=this.control.main;if(t)n.addClasses(t,this.getStateClasses(e))},o.removeStateClasses=function(e){var t=this.control.main;if(t)n.removeClasses(t,this.getStateClasses(e))},o.getId=function(e){if(e=e?"-"+e:"",!this.control.domIDPrefix)this.control.domIDPrefix=this.control.viewContext&&this.control.viewContext.id;var t=this.control.domIDPrefix?this.control.domIDPrefix+"-":"";return"ctrl-"+t+this.control.id+e},o.createPart=function(e,t){t=t||"div";var i=document.createElement(t);return i.id=this.getId(e),this.addPartClasses(e,i),i},o.getPart=function(e){return n.g(this.getId(e))},o.isPart=function(e,t){var i=this.getPartClasses(t)[0];return n.hasClass(e,i)};var r={type:!0,name:!0,alt:!0,autocomplete:!0,autofocus:!0,checked:!0,dirname:!0,disabled:!0,form:!0,formaction:!0,formenctype:!0,formmethod:!0,formnovalidate:!0,formtarget:!0,width:!0,height:!0,inputmode:!0,list:!0,max:!0,maxlength:!0,min:!0,minlength:!0,multiple:!0,pattern:!0,placeholder:!0,readonly:!0,required:!0,size:!0,src:!0,step:!0,value:!0};o.replaceMain=function(e){e=e||this.control.createMain();var t=this.control.main;t.setAttribute(a.getConfig("instanceAttr"),n.getGUID());for(var i=t.attributes,o=0;o<i.length;o++){var s=i[o],l=s.name;if(n.hasAttribute(t,l)&&!r.hasOwnProperty(l))n.setAttribute(e,l,s.value)}return n.insertBefore(e,t),t.parentNode.removeChild(t),this.control.main=e,t};var s={name:{name:"name"},maxlength:{name:"maxLength",type:"number"},required:{name:"required",type:"boolean"},pattern:{name:"pattern"},min:{name:"min",type:"number"},max:{name:"max",type:"number"},autofocus:{name:"autoFocus",type:"boolean"},disabled:{name:"disabled",type:"boolean"},readonly:{name:"readOnly",type:"boolean"}};return o.extractOptionsFromInput=function(e,t){var a={};if(i.each(s,function(t,i){var o=n.hasAttribute(e,i);if(o){var r=n.getAttribute(e,i);switch(t.type){case"boolean":r=o;break;case"number":r=parseInt(r,10)}a[t.name]=r}}),n.hasAttribute(e,"value")||"select"!==e.nodeName.toLowerCase()&&e.value)a.value=e.value;return i.defaults(t||{},a)},o});