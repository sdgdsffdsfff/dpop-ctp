define("esui/InputControl",["require","./lib","./controlHelper","./Control","./Validity","./validator/Validity","./main"],function(require){function e(e){if(e=e?t.extend({},e):{},e.main&&!e.name)e.name=e.main.getAttribute("name");n.call(this,e)}var t=require("./lib"),i=require("./controlHelper"),n=require("./Control"),a=require("./Validity"),o=require("./validator/Validity"),r=require("./main");return e.prototype={constructor:e,ignoreStates:n.prototype.ignoreStates.concat("read-only"),getCategory:function(){return"input"},getFocusTarget:function(){return null},getValue:function(){return this.stringifyValue(this.getRawValue())},setValue:function(e){var t=this.parseValue(e);this.setRawValue(t)},getRawValue:function(){return this.rawValue},setRawValue:function(e){this.setProperties({rawValue:e})},setProperties:function(e){var t=e.value;if(delete e.value,null!=t&&null==e.rawValue)e.rawValue=this.parseValue(t);if(this.hasOwnProperty("readOnly"))this.readOnly=!!this.readOnly;return n.prototype.setProperties.call(this,e)},repaint:i.createRepaint(n.prototype.repaint,{name:"disabled",paint:function(e,t){var i=e.main.nodeName.toLowerCase();if("input"===i||"select"===i||"textarea"===i)e.main.disabled=t}},{name:"readOnly",paint:function(e,t){var i=t?"addState":"removeState";e[i]("read-only");var n=e.main.nodeName.toLowerCase();if("input"===n||"select"===n||"textarea"===n)e.main.readOnly=t}},{name:"hidden",paint:function(e){var n=e.getValidityLabel(!0);if(n){var a=r.getConfig("uiClassPrefix"),o=[].concat(a+"-hidden",a+"-validity-hidden",i.getPartClasses(e,"validity-hidden")),s=e.isHidden()?"addClasses":"removeClasses";t[s](n,o)}}}),stringifyValue:function(e){return null!=e?e+"":""},parseValue:function(e){return e},setReadOnly:function(e){e=!!e,this[e?"addState":"removeState"]("read-only")},isReadOnly:function(){return this.hasState("read-only")},getValidationResult:function(){var e=new o,t={validity:e};t=this.fire("beforevalidate",t);for(var i=r.createRulesByControl(this),n=0,a=i.length;a>n;n++){var s=i[n];e.addState(s.getName(),s.check(this.getValue(),this))}if(!e.isValid())t=this.fire("invalid",t);return this.fire("aftervalidate",t),e},checkValidity:function(){var e=this.getValidationResult();return e.isValid()},validate:function(){var e=this.getValidationResult();return this.showValidity(e),e.isValid()},getValidityLabel:function(e){if(!i.isInStage(this,"RENDERED"))return null;var n=this.validityLabel&&this.viewContext.get(this.validityLabel);if(!n&&!e){var o={id:this.id+"-validity",viewContext:this.viewContext};if(n=new a(o),this.main.nextSibling){var r=this.main.nextSibling;n.insertBefore(r)}else n.appendTo(this.main.parentNode);this.validityLabel=n.id}if((8===t.ie||7===t.ie)&&n)t.toggleClass(n.main.parentNode,"fuck-the-ie");return n},showValidity:function(e){if(this.validity)this.removeState("validity-"+this.validity.getValidState());this.validity=e,this.addState("validity-"+e.getValidState());var t=this.getValidityLabel();if(t){var i={target:this,focusTarget:this.getFocusTarget(),validity:e};t.setProperties(i)}},showValidationMessage:function(e,t){t=t||"";var i=new o;i.setCustomValidState(e),i.setCustomMessage(t),this.showValidity(i)},dispose:function(){if(!i.isInStage(this,"DISPOSED")){var e=this.getValidityLabel(!0);if(e)e.dispose();n.prototype.dispose.apply(this,arguments)}}},t.inherits(e,n),e});