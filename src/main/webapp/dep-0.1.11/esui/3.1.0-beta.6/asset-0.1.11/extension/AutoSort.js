define("esui/extension/AutoSort",["require","underscore","../Table","../Extension","../lib","../main"],function(require){function e(){a.apply(this,arguments)}function t(e){function t(t,i){var a=n(t,i);return"asc"===e.order?a:-a}var n=e.field.comparer;if(!n){var a=e.field.field;n=function(e,t){if(a)e=e[a],t=t[a];return i.isString(e)&&i.isString(t)?e.localeCompare(t):e-t}}var o=this.datasource;o.sort(t),this.setDatasource(o)}var i=require("underscore"),n=require("../Table"),a=require("../Extension");return e.prototype.type="AutoSort",e.prototype.activate=function(){if(this.target instanceof n)this.target.on("sort",t),a.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){if(this.target instanceof n)this.target.un("sort",t),a.prototype.inactivate.apply(this,arguments)},require("../lib").inherits(e,a),require("../main").registerExtension(e),e});