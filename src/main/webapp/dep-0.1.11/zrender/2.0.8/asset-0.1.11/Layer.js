define("zrender/Layer",["require","./mixin/Transformable","./tool/util","./config"],function(require){function e(){return!1}function t(e,t,i){var n=document.createElement(t),a=i.getWidth(),o=i.getHeight();return n.style.position="absolute",n.style.left=0,n.style.top=0,n.style.width=a+"px",n.style.height=o+"px",n.width=a*r.devicePixelRatio,n.height=o*r.devicePixelRatio,n.setAttribute("data-zr-dom-id",e),n}var i=require("./mixin/Transformable"),n=require("./tool/util"),a=window.G_vmlCanvasManager,r=require("./config"),o=function(n,r){this.id=n,this.dom=t(n,"canvas",r),this.dom.onselectstart=e,this.dom.style["-webkit-user-select"]="none",this.dom.style["user-select"]="none",this.dom.style["-webkit-touch-callout"]="none",this.dom.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",a&&a.initElement(this.dom),this.domBack=null,this.ctxBack=null,this.painter=r,this.unusedCount=0,this.config=null,this.dirty=!0,this.elCount=0,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.zoomable=!1,this.panable=!1,this.maxZoom=1/0,this.minZoom=0,i.call(this)};return o.prototype.initContext=function(){this.ctx=this.dom.getContext("2d");var e=r.devicePixelRatio;if(1!=e)this.ctx.scale(e,e)},o.prototype.createBackBuffer=function(){if(!a){this.domBack=t("back-"+this.id,"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d");var e=r.devicePixelRatio;if(1!=e)this.ctxBack.scale(e,e)}},o.prototype.resize=function(e,t){var i=r.devicePixelRatio;if(this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*i),this.dom.setAttribute("height",t*i),1!=i)this.ctx.scale(i,i);if(this.domBack)if(this.domBack.setAttribute("width",e*i),this.domBack.setAttribute("height",t*i),1!=i)this.ctxBack.scale(i,i)},o.prototype.clear=function(){var e=this.dom,t=this.ctx,i=e.width,n=e.height,o=this.clearColor&&!a,s=this.motionBlur&&!a,l=this.lastFrameAlpha,h=r.devicePixelRatio;if(s){if(!this.domBack)this.createBackBuffer();this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,i/h,n/h)}if(t.clearRect(0,0,i/h,n/h),o)t.save(),t.fillStyle=this.clearColor,t.fillRect(0,0,i/h,n/h),t.restore();if(s){var d=this.domBack;t.save(),t.globalAlpha=l,t.drawImage(d,0,0,i/h,n/h),t.restore()}},n.merge(o.prototype,i.prototype),o});