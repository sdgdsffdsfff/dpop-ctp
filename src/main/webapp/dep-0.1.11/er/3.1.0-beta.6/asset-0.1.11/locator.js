define("er/locator",["require","./config","./events","mini-event/EventTarget"],function(require){function e(){var e=location.href.indexOf("#"),t=-1===e?"":location.href.slice(e);return t}function t(){var t=e();o.redirect(t)}function i(e){if(window.addEventListener)window.addEventListener("hashchange",t,!1);else if("onhashchange"in window&&document.documentMode>7)window.attachEvent("onhashchange",t);else s=setInterval(t,100);if(e)l=setTimeout(t,0)}function n(){if(s)clearInterval(s),s=null;if(l)clearTimeout(l),l=null;if(window.removeEventListener)window.removeEventListener("hashchange",t,!1);else if("onhashchange"in window&&document.documentMode>7)window.detachEvent("onhashchange",t)}function a(t,a){var o=r!==t;if(o&&e()!==t)if(a.silent)n(),location.hash=t,i(!1);else location.hash=t;return r=t,o}var o={},r="",s=0,l=1;return o.start=function(){i(!0)},o.stop=n,o.resolveURL=function(e){if(e+="",0===e.indexOf("#"))e=e.slice(1);if(!e||"/"===e)e=require("./config").indexURL;return e},o.redirect=function(e,t){t=t||{},e=o.resolveURL(e);var i=r,n=a(e,t),s=n||t.force;if(s){if(!t.silent)o.fire("redirect",{url:e,referrer:i});require("./events").fire("redirect",{url:e,referrer:i})}return s},o.reload=function(){if(r)o.redirect(r,{force:!0})},require("mini-event/EventTarget").enable(o),o});