define("ub-ria/ui/extension/ExternSelect",["require","underscore","esui/lib","esui/Extension","esui"],function(require){function e(e){e=e||{},o.apply(this,arguments)}function t(){this.target.search()}function i(e){this.handleControls(function(t){var i=t.getSelectedItem();if(""!==i.value&&t.dataKey)e.filterData.push({keys:[t.dataKey],value:i.value})}),e.preventDefault()}function n(){this.handleControls(function(e){e.un("change",t,this),e.setProperties({selectedIndex:0}),e.on("change",t,this)})}var a=require("underscore"),r=require("esui/lib"),o=require("esui/Extension");return e.prototype.type="ExternSelect",e.prototype.selects=null,e.prototype.resolveControls=function(){var e=[];if(this.selects){var t;if(a.isString(this.selects))t=r.splitTokenList(this.selects);else t=this.selects;if(a.isArray(t))a.each(t,function(t){var t=this.target.viewContext.get(t);if(t)e.push(t);else if(this.active)throw new Error('Cannot find related select "#'+t+'" in view context')},this);else throw new Error("selects can only be Array or String")}else throw new Error("selects cannot be null");return e},e.prototype.activate=function(){this.handleControls(function(e){e.on("change",t,this)}),this.target.on("clearquery",n,this),this.target.on("search",i,this),o.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){o.prototype.inactivate.apply(this,arguments),this.handleControls(function(e){e.un("change",t,this)},!0),this.target.un("clearquery",n,this),this.target.un("search",i,this)},e.prototype.handleControls=function(e){var t=this.resolveControls();if(t.length)a.each(t,e,this)},r.inherits(e,o),require("esui").registerExtension(e),e});