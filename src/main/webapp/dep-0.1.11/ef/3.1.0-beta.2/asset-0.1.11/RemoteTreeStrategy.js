define("ef/RemoteTreeStrategy",["require","esui/lib","esui/TreeStrategy","er/ajax","eoo"],function(require){function e(e,i,n){var a=n.node;if(a.children)return void e.expandNode(a.id);var o=e.workingRequests[a.id];if(o)o.abort();o=this.requestNodeData(a),e.workingRequests[a.id]=o,o.done(t.bind(e.expandNode,e,a.id))}var t=require("esui/lib"),i=require("esui/TreeStrategy"),exports={};exports.constructor=function(e){if(e.requestMethod)e.requestMethod=e.requestMethod.toLowerCase();i.apply(this,arguments),this.workingRequests={}},exports.urlTemplate="",exports.requestMethod="get",exports.getRequestURL=function(e){return t.format(this.urlTemplate,e)},exports.getRequestData=function(){return null},exports.requestNodeData=function(e){var t=this.getRequestURL(e),i=this.getRequestData(e),n=require("er/ajax");return"get"===this.requestMethod?n.getJSON(t,i,this.useCache||!1):n.post(t,i,"json")},exports.enableToggleStrategy=function(i){i.on("expand",t.curry(e,i,this)),i.on("collapse",function(e){this.collapseNode(e.node.id,!1)})};var n=require("eoo").create(i,exports);return t.inherits(n,i),n});