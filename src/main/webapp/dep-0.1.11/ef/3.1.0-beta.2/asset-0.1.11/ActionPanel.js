define("ef/ActionPanel",["require","er/events","esui/Panel","mini-event","er/Deferred","esui/painters","er/controller","eoo","esui"],function(require){function e(e){var t=require("mini-event").fromEvent(e,{preserveData:!0,syncState:!0});t.type="action@"+e.type,this.fire(t)}function t(t){if(t.isChildAction&&t.container===this.main.id){if(this.action=t.action,"function"==typeof this.action.on)this.action.on("*",e,this);this.fire("actionattach")}}function i(e){if(e.isChildAction&&e.container===this.main.id)this.fire("actionloaded")}function n(e){if(e.isChildAction&&e.container===this.main.id)this.action=null,this.fire("actionloadfail",{failType:e.failType,reason:e.reason})}function a(e){if(e.isChildAction&&e.container===this.main.id)this.fire("actionloadabort")}var o=require("er/events"),s=require("esui/Panel"),exports={};exports.type="ActionPanel",exports.setContent=function(){},exports.actionType=null,exports.action=null,exports.initStructure=function(){o.on("enteraction",t,this),o.on("enteractioncomplete",i,this),o.on("actionnotfound",n,this),o.on("permissiondenied",n,this),o.on("actionfail",n,this),o.on("enteractionfail",n,this),o.on("actionabort",a,this)},exports.disposeAction=function(){var t=require("er/Deferred"),i=this.action;if(i){if(t.isPromise(i)&&"function"==typeof i.abort)i.abort();else{if("function"==typeof i.un)i.un("*",e,this);if("function"==typeof i.leave)i.leave()}this.action=null}},exports.repaint=require("esui/painters").createRepaint(s.prototype.repaint,{name:["url","actionOptions"],paint:function(e,t,i){if(e.disposeAction(),t)if(!e.lazy||!e.helper.isInStage("INITED")){var n=require("er/controller");if(e.action=n.renderChildAction(t,e.main.id,i),"function"!=typeof e.action.abort)e.action=null}}}),exports.dispose=function(){this.disposeAction(),o.un("enteraction",t,this),o.un("enteractioncomplete",i,this),o.un("actionnotfound",n,this),o.un("permissiondenied",n,this),o.un("actionfail",n,this),o.un("enteractionfail",n,this),o.un("actionabort",a,this),this.$super(arguments)},exports.reload=function(e){var t=this.url;this.url=null,this.setProperties({url:t,actionOptions:e})};var r=require("eoo").create(s,exports);return require("esui").register(r),r});