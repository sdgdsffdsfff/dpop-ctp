define("echarts/chart/radar",["require","./base","zrender/shape/Polygon","../component/polar","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../util/accMath","../chart"],function(require){function e(e,i,a,s,r){t.call(this,e,i,a,s,r),this.refresh(s)}var t=require("./base"),i=require("zrender/shape/Polygon");require("../component/polar");var a=require("../config");a.radar={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,polarIndex:0,itemStyle:{normal:{label:{show:!1},lineStyle:{width:2,type:"solid"}},emphasis:{label:{show:!1}}},symbolSize:2};var s=require("../util/ecData"),r=require("zrender/tool/util"),o=require("zrender/tool/color");return e.prototype={type:a.CHART_TYPE_RADAR,_buildShape:function(){this.selectedMap={},this._symbol=this.option.symbolList,this._queryTarget,this._dropBoxList=[],this._radarDataCounter=0;for(var e,t=this.series,i=this.component.legend,s=0,r=t.length;r>s;s++)if(t[s].type===a.CHART_TYPE_RADAR)if(this.serie=this.reformOption(t[s]),this.legendHoverLink=t[s].legendHoverLink||this.legendHoverLink,e=this.serie.name||"",this.selectedMap[e]=i?i.isSelected(e):!0,this.selectedMap[e]){if(this._queryTarget=[this.serie,this.option],this.deepQuery(this._queryTarget,"calculable"))this._addDropBox(s);this._buildSingleRadar(s),this.buildMark(s)}this.addShapeList()},_buildSingleRadar:function(e){for(var t,i,a,s,r=this.component.legend,o=this.serie.data,l=this.deepQuery(this._queryTarget,"calculable"),n=0;n<o.length;n++)if(a=o[n].name||"",this.selectedMap[a]=r?r.isSelected(a):!0,this.selectedMap[a]){if(r){if(i=r.getColor(a),t=r.getItemShape(a))t.style.brushType=this.deepQuery([o[n],this.serie],"itemStyle.normal.areaStyle")?"both":"stroke",r.setItemShape(a,t)}else i=this.zr.getColor(n);s=this._getPointList(this.serie.polarIndex,o[n]),this._addSymbol(s,i,n,e,this.serie.polarIndex),this._addDataShape(s,i,o[n],e,n,l),this._radarDataCounter++}else;},_getPointList:function(e,t){for(var i,a,s=[],r=this.component.polar,o=0,l=t.value.length;l>o;o++)if(a=this.getDataFromOption(t.value[o]),i="-"!=a?r.getVector(e,o,a):!1)s.push(i);return s},_addSymbol:function(e,t,i,a,r){for(var o,l=this.series,n=this.component.polar,h=0,d=e.length;d>h;h++)o=this.getSymbolShape(this.deepMerge([l[a].data[i],l[a]]),a,l[a].data[i].value[h],h,n.getIndicatorText(r,h),e[h][0],e[h][1],this._symbol[this._radarDataCounter%this._symbol.length],t,"#fff","vertical"),o.zlevel=this.getZlevelBase(),o.z=this.getZBase()+1,s.set(o,"data",l[a].data[i]),s.set(o,"value",l[a].data[i].value),s.set(o,"dataIndex",i),s.set(o,"special",h),this.shapeList.push(o)},_addDataShape:function(e,t,a,r,l,n){var h=this.series,d=[a,this.serie],p=this.getItemStyleColor(this.deepQuery(d,"itemStyle.normal.color"),r,l,a),c=this.deepQuery(d,"itemStyle.normal.lineStyle.width"),u=this.deepQuery(d,"itemStyle.normal.lineStyle.type"),g=this.deepQuery(d,"itemStyle.normal.areaStyle.color"),f=this.deepQuery(d,"itemStyle.normal.areaStyle"),m={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:e,brushType:f?"both":"stroke",color:g||p||("string"==typeof t?o.alpha(t,.5):t),strokeColor:p||t,lineWidth:c,lineType:u},highlightStyle:{brushType:this.deepQuery(d,"itemStyle.emphasis.areaStyle")||f?"both":"stroke",color:this.deepQuery(d,"itemStyle.emphasis.areaStyle.color")||g||p||("string"==typeof t?o.alpha(t,.5):t),strokeColor:this.getItemStyleColor(this.deepQuery(d,"itemStyle.emphasis.color"),r,l,a)||p||t,lineWidth:this.deepQuery(d,"itemStyle.emphasis.lineStyle.width")||c,lineType:this.deepQuery(d,"itemStyle.emphasis.lineStyle.type")||u}};if(s.pack(m,h[r],r,a,l,a.name,this.component.polar.getIndicator(h[r].polarIndex)),n)m.draggable=!0,this.setCalculable(m);m=new i(m),this.shapeList.push(m)},_addDropBox:function(e){var t=this.series,i=this.deepQuery(this._queryTarget,"polarIndex");if(!this._dropBoxList[i]){var a=this.component.polar.getDropBox(i);a.zlevel=this.getZlevelBase(),a.z=this.getZBase(),this.setCalculable(a),s.pack(a,t,e,void 0,-1),this.shapeList.push(a),this._dropBoxList[i]=!0}},ondragend:function(e,t){var i=this.series;if(this.isDragend&&e.target){var a=e.target,r=s.get(a,"seriesIndex"),o=s.get(a,"dataIndex");this.component.legend&&this.component.legend.del(i[r].data[o].name),i[r].data.splice(o,1),t.dragOut=!0,t.needRefresh=!0,this.isDragend=!1}},ondrop:function(e,t){var i=this.series;if(this.isDrop&&e.target){var a,r,o=e.target,l=e.dragged,n=s.get(o,"seriesIndex"),h=s.get(o,"dataIndex"),d=this.component.legend;if(-1===h)a={value:s.get(l,"value"),name:s.get(l,"name")},i[n].data.push(a),d&&d.add(a.name,l.style.color||l.style.strokeColor);else{var p=require("../util/accMath");a=i[n].data[h],d&&d.del(a.name),a.name+=this.option.nameConnector+s.get(l,"name"),r=s.get(l,"value");for(var c=0;c<r.length;c++)a.value[c]=p.accAdd(a.value[c],r[c]);d&&d.add(a.name,l.style.color||l.style.strokeColor)}t.dragIn=t.dragIn||!0,this.isDrop=!1}},refresh:function(e){if(e)this.option=e,this.series=e.series;this.backupShapeList(),this._buildShape()}},r.inherits(e,t),require("../chart").define("radar",e),e});