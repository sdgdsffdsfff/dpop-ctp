define("echarts/component/axis",["require","./base","zrender/shape/Line","../config","../util/ecData","zrender/tool/util","zrender/tool/color","./categoryAxis","./valueAxis","../component"],function(require){function e(e,i,a,s,r,o){t.call(this,e,i,a,s,r),this.axisType=o,this._axisList=[],this.refresh(s)}var t=require("./base"),i=require("zrender/shape/Line"),a=require("../config"),s=require("../util/ecData"),r=require("zrender/tool/util"),o=require("zrender/tool/color");return e.prototype={type:a.COMPONENT_TYPE_AXIS,axisBase:{_buildAxisLine:function(){var e=this.option.axisLine.lineStyle.width,t=e/2,a={_axisShape:"axisLine",zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1},s=this.grid;switch(this.option.position){case"left":a.style={xStart:s.getX()-t,yStart:s.getYend(),xEnd:s.getX()-t,yEnd:s.getY(),lineCap:"round"};break;case"right":a.style={xStart:s.getXend()+t,yStart:s.getYend(),xEnd:s.getXend()+t,yEnd:s.getY(),lineCap:"round"};break;case"bottom":a.style={xStart:s.getX(),yStart:s.getYend()+t,xEnd:s.getXend(),yEnd:s.getYend()+t,lineCap:"round"};break;case"top":a.style={xStart:s.getX(),yStart:s.getY()-t,xEnd:s.getXend(),yEnd:s.getY()-t,lineCap:"round"}}var r=a.style;if(""!==this.option.name){if(r.text=this.option.name,r.textPosition=this.option.nameLocation,r.textFont=this.getFont(this.option.nameTextStyle),this.option.nameTextStyle.align)r.textAlign=this.option.nameTextStyle.align;if(this.option.nameTextStyle.baseline)r.textBaseline=this.option.nameTextStyle.baseline;if(this.option.nameTextStyle.color)r.textColor=this.option.nameTextStyle.color}if(r.strokeColor=this.option.axisLine.lineStyle.color,r.lineWidth=e,this.isHorizontal())r.yStart=r.yEnd=this.subPixelOptimize(r.yEnd,e);else r.xStart=r.xEnd=this.subPixelOptimize(r.xEnd,e);r.lineType=this.option.axisLine.lineStyle.type,a=new i(a),this.shapeList.push(a)},_axisLabelClickable:function(e,t){if(e)return s.pack(t,void 0,-1,void 0,-1,t.style.text),t.hoverable=!0,t.clickable=!0,t.highlightStyle={color:o.lift(t.style.color,1),brushType:"fill"},t;else return t},refixAxisShape:function(e,t){if(this.option.axisLine.onZero){var i;if(this.isHorizontal()&&null!=t)for(var a=0,s=this.shapeList.length;s>a;a++)if("axisLine"===this.shapeList[a]._axisShape)this.shapeList[a].style.yStart=this.shapeList[a].style.yEnd=this.subPixelOptimize(t,this.shapeList[a].stylelineWidth),this.zr.modShape(this.shapeList[a].id);else if("axisTick"===this.shapeList[a]._axisShape)i=this.shapeList[a].style.yEnd-this.shapeList[a].style.yStart,this.shapeList[a].style.yStart=t-i,this.shapeList[a].style.yEnd=t,this.zr.modShape(this.shapeList[a].id);if(!this.isHorizontal()&&null!=e)for(var a=0,s=this.shapeList.length;s>a;a++)if("axisLine"===this.shapeList[a]._axisShape)this.shapeList[a].style.xStart=this.shapeList[a].style.xEnd=this.subPixelOptimize(e,this.shapeList[a].stylelineWidth),this.zr.modShape(this.shapeList[a].id);else if("axisTick"===this.shapeList[a]._axisShape)i=this.shapeList[a].style.xEnd-this.shapeList[a].style.xStart,this.shapeList[a].style.xStart=e,this.shapeList[a].style.xEnd=e+i,this.zr.modShape(this.shapeList[a].id)}},getPosition:function(){return this.option.position},isHorizontal:function(){return"bottom"===this.option.position||"top"===this.option.position}},reformOption:function(e){if(!e||e instanceof Array&&0===e.length)e=[{type:a.COMPONENT_TYPE_AXIS_VALUE}];else if(!(e instanceof Array))e=[e];if(e.length>2)e=[e[0],e[1]];if("xAxis"===this.axisType){if(!e[0].position||"bottom"!=e[0].position&&"top"!=e[0].position)e[0].position="bottom";if(e.length>1)e[1].position="bottom"===e[0].position?"top":"bottom";for(var t=0,i=e.length;i>t;t++)e[t].type=e[t].type||"category",e[t].xAxisIndex=t,e[t].yAxisIndex=-1}else{if(!e[0].position||"left"!=e[0].position&&"right"!=e[0].position)e[0].position="left";if(e.length>1)e[1].position="left"===e[0].position?"right":"left";for(var t=0,i=e.length;i>t;t++)e[t].type=e[t].type||"value",e[t].xAxisIndex=-1,e[t].yAxisIndex=t}return e},refresh:function(e){var t;if(e){if(this.option=e,"xAxis"===this.axisType)this.option.xAxis=this.reformOption(e.xAxis),t=this.option.xAxis;else this.option.yAxis=this.reformOption(e.yAxis),t=this.option.yAxis;this.series=e.series}for(var i=require("./categoryAxis"),a=require("./valueAxis"),s=Math.max(t&&t.length||0,this._axisList.length),r=0;s>r;r++){if(this._axisList[r]&&e&&(!t[r]||this._axisList[r].type!=t[r].type))this._axisList[r].dispose&&this._axisList[r].dispose(),this._axisList[r]=!1;if(this._axisList[r])this._axisList[r].refresh&&this._axisList[r].refresh(t?t[r]:!1,this.series);else if(t&&t[r])this._axisList[r]="category"===t[r].type?new i(this.ecTheme,this.messageCenter,this.zr,t[r],this.myChart,this.axisBase):new a(this.ecTheme,this.messageCenter,this.zr,t[r],this.myChart,this.axisBase,this.series)}},getAxis:function(e){return this._axisList[e]},clear:function(){for(var e=0,t=this._axisList.length;t>e;e++)this._axisList[e].dispose&&this._axisList[e].dispose();this._axisList=[]}},r.inherits(e,t),require("../component").define("axis",e),e});