define("echarts/component/title",["require","./base","zrender/shape/Text","zrender/shape/Rectangle","../config","zrender/tool/util","zrender/tool/area","zrender/tool/color","../component"],function(require){function e(e,i,s,a,o){t.call(this,e,i,s,a,o),this.refresh(a)}var t=require("./base"),i=require("zrender/shape/Text"),s=require("zrender/shape/Rectangle"),a=require("../config");a.title={zlevel:0,z:6,show:!0,text:"",subtext:"",x:"left",y:"top",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:5,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}};var o=require("zrender/tool/util"),n=require("zrender/tool/area"),r=require("zrender/tool/color");return e.prototype={type:a.COMPONENT_TYPE_TITLE,_buildShape:function(){if(this.titleOption.show){this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._buildItem();for(var e=0,t=this.shapeList.length;t>e;e++)this.zr.addShape(this.shapeList[e])}},_buildItem:function(){var e=this.titleOption.text,t=this.titleOption.link,s=this.titleOption.target,a=this.titleOption.subtext,o=this.titleOption.sublink,n=this.titleOption.subtarget,h=this.getFont(this.titleOption.textStyle),l=this.getFont(this.titleOption.subtextStyle),d=this._itemGroupLocation.x,p=this._itemGroupLocation.y,c=this._itemGroupLocation.width,g=this._itemGroupLocation.height,u={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{y:p,color:this.titleOption.textStyle.color,text:e,textFont:h,textBaseline:"top"},highlightStyle:{color:r.lift(this.titleOption.textStyle.color,1),brushType:"fill"},hoverable:!1};if(t)u.hoverable=!0,u.clickable=!0,u.onclick=function(){if(!s||"self"!=s)window.open(t);else window.location=t};var f={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{y:p+g,color:this.titleOption.subtextStyle.color,text:a,textFont:l,textBaseline:"bottom"},highlightStyle:{color:r.lift(this.titleOption.subtextStyle.color,1),brushType:"fill"},hoverable:!1};if(o)f.hoverable=!0,f.clickable=!0,f.onclick=function(){if(!n||"self"!=n)window.open(o);else window.location=o};switch(this.titleOption.x){case"center":u.style.x=f.style.x=d+c/2,u.style.textAlign=f.style.textAlign="center";break;case"left":u.style.x=f.style.x=d,u.style.textAlign=f.style.textAlign="left";break;case"right":u.style.x=f.style.x=d+c,u.style.textAlign=f.style.textAlign="right";break;default:d=this.titleOption.x-0,d=isNaN(d)?0:d,u.style.x=f.style.x=d}if(this.titleOption.textAlign)u.style.textAlign=f.style.textAlign=this.titleOption.textAlign;this.shapeList.push(new i(u)),""!==a&&this.shapeList.push(new i(f))},_buildBackground:function(){var e=this.reformCssArray(this.titleOption.padding);this.shapeList.push(new s({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-e[3],y:this._itemGroupLocation.y-e[0],width:this._itemGroupLocation.width+e[3]+e[1],height:this._itemGroupLocation.height+e[0]+e[2],brushType:0===this.titleOption.borderWidth?"fill":"both",color:this.titleOption.backgroundColor,strokeColor:this.titleOption.borderColor,lineWidth:this.titleOption.borderWidth}}))},_getItemGroupLocation:function(){var e,t=this.reformCssArray(this.titleOption.padding),i=this.titleOption.text,s=this.titleOption.subtext,a=this.getFont(this.titleOption.textStyle),o=this.getFont(this.titleOption.subtextStyle),r=Math.max(n.getTextWidth(i,a),n.getTextWidth(s,o)),h=n.getTextHeight(i,a)+(""===s?0:this.titleOption.itemGap+n.getTextHeight(s,o)),l=this.zr.getWidth();switch(this.titleOption.x){case"center":e=Math.floor((l-r)/2);break;case"left":e=t[3]+this.titleOption.borderWidth;break;case"right":e=l-r-t[1]-this.titleOption.borderWidth;break;default:e=this.titleOption.x-0,e=isNaN(e)?0:e}var d,p=this.zr.getHeight();switch(this.titleOption.y){case"top":d=t[0]+this.titleOption.borderWidth;break;case"bottom":d=p-h-t[2]-this.titleOption.borderWidth;break;case"center":d=Math.floor((p-h)/2);break;default:d=this.titleOption.y-0,d=isNaN(d)?0:d}return{x:e,y:d,width:r,height:h}},refresh:function(e){if(e)this.option=e,this.option.title=this.reformOption(this.option.title),this.titleOption=this.option.title,this.titleOption.textStyle=this.getTextStyle(this.titleOption.textStyle),this.titleOption.subtextStyle=this.getTextStyle(this.titleOption.subtextStyle);this.clear(),this._buildShape()}},o.inherits(e,t),require("../component").define("title",e),e});