define("echarts/util/shape/MarkLine",["require","zrender/shape/Base","./Icon","zrender/shape/Line","zrender/shape/BezierCurve","zrender/tool/area","zrender/shape/util/dashedLineTo","zrender/tool/util","zrender/tool/curve"],function(require){function e(e){if(t.call(this,e),this.style.curveness>0)this.updatePoints(this.style);if(this.highlightStyle.curveness>0)this.updatePoints(this.highlightStyle)}var t=require("zrender/shape/Base"),i=require("./Icon"),n=require("zrender/shape/Line"),a=new n({}),o=require("zrender/shape/BezierCurve"),s=new o({}),l=require("zrender/tool/area"),r=require("zrender/shape/util/dashedLineTo"),h=require("zrender/tool/util"),V=require("zrender/tool/curve");return e.prototype={type:"mark-line",brush:function(e,t){var i=this.style;if(t)i=this.getHighlightStyle(i,this.highlightStyle||{});e.save(),this.setContext(e,i),this.setTransform(e),e.save(),e.beginPath(),this.buildPath(e,i),e.stroke(),e.restore(),this.brushSymbol(e,i,0),this.brushSymbol(e,i,1),this.drawText(e,i,this.style),e.restore()},buildPath:function(e,t){var i=t.lineType||"solid";if(e.moveTo(t.xStart,t.yStart),t.curveness>0){var n=null;switch(i){case"dashed":n=[5,5];break;case"dotted":n=[1,1]}if(n&&e.setLineDash)e.setLineDash(n);e.quadraticCurveTo(t.cpX1,t.cpY1,t.xEnd,t.yEnd)}else if("solid"==i)e.lineTo(t.xEnd,t.yEnd);else{var a=(t.lineWidth||1)*("dashed"==t.lineType?5:1);r(e,t.xStart,t.yStart,t.xEnd,t.yEnd,a)}},updatePoints:function(e){var t=e.curveness||0,i=1,n=e.xStart,a=e.yStart,o=e.xEnd,s=e.yEnd,l=(n+o)/2-i*(a-s)*t,r=(a+s)/2-i*(o-n)*t;e.cpX1=l,e.cpY1=r},brushSymbol:function(e,t,n){if("none"!=t.symbol[n]){e.save(),e.beginPath(),e.lineWidth=t.symbolBorder,e.strokeStyle=t.symbolBorderColor;var a=t.symbol[n].replace("empty","").toLowerCase();if(t.symbol[n].match("empty"))e.fillStyle="#fff";var o=t.xStart,s=t.yStart,l=t.xEnd,r=t.yEnd,h=0===n?o:l,U=0===n?s:r,m=t.curveness||0,d=null!=t.symbolRotate[n]?t.symbolRotate[n]-0:0;if(d=d/180*Math.PI,"arrow"==a&&0===d)if(0===m){var p=0===n?-1:1;d=Math.PI/2+Math.atan2(p*(r-s),p*(l-o))}else{var c=t.cpX1,y=t.cpY1,b=V.quadraticDerivativeAt,u=b(o,c,l,n),f=b(s,y,r,n);d=Math.PI/2+Math.atan2(f,u)}if(e.translate(h,U),0!==d)e.rotate(d);var g=t.symbolSize[n];i.prototype.buildPath(e,{x:-g,y:-g,width:2*g,height:2*g,iconType:a}),e.closePath(),e.fill(),e.stroke(),e.restore()}},getRect:function(e){return e.curveness>0?s.getRect(e):a.getRect(e),e.__rect},isCover:function(e,t){var i=this.transformCoordToLocal(e,t);if(e=i[0],t=i[1],this.isCoverRect(e,t))return this.style.curveness>0?l.isInside(s,this.style,e,t):l.isInside(a,this.style,e,t);else return!1}},h.inherits(e,t),e});