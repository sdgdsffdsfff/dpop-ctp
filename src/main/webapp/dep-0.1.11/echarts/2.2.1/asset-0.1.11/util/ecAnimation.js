define("echarts/util/ecAnimation",["require","zrender/tool/util","zrender/tool/curve","zrender/shape/Polygon"],function(require){function t(t,e,i,s,o){var a,n=i.style.pointList,r=n.length;if(!e){if(a=[],"vertical"!=i._orient)for(var h=n[0][1],l=0;r>l;l++)a[l]=[n[l][0],h];else for(var d=n[0][0],l=0;r>l;l++)a[l]=[d,n[l][1]];if("half-smooth-polygon"==i.type)a[r-1]=g.clone(n[r-1]),a[r-2]=g.clone(n[r-2]);e={style:{pointList:a}}}a=e.style.pointList;var p=a.length;if(p==r)i.style.pointList=a;else if(r>p)i.style.pointList=a.concat(n.slice(p));else i.style.pointList=a.slice(0,r);t.addShape(i),i.__animating=!0,t.animate(i.id,"style").when(s,{pointList:n}).during(function(){if(i.updateControlPoints)i.updateControlPoints(i.style)}).done(function(){i.__animating=!1}).start(o)}function e(t,e){for(var i=arguments.length,s=2;i>s;s++){var o=arguments[s];t.style[o]=e.style[o]}}function i(t,i,s,o,a){var n=s.style;if(!i)i={position:s.position,style:{x:n.x,y:"vertical"==s._orient?n.y+n.height:n.y,width:"vertical"==s._orient?n.width:0,height:"vertical"!=s._orient?n.height:0}};var r=n.x,h=n.y,l=n.width,d=n.height,p=[s.position[0],s.position[1]];if(e(s,i,"x","y","width","height"),s.position=i.position,t.addShape(s),p[0]!=i.position[0]||p[1]!=i.position[1])t.animate(s.id,"").when(o,{position:p}).start(a);s.__animating=!0,t.animate(s.id,"style").when(o,{x:r,y:h,width:l,height:d}).done(function(){s.__animating=!1}).start(a)}function s(t,e,i,s,o){if(!e){var a=i.style.y;e={style:{y:[a[0],a[0],a[0],a[0]]}}}var n=i.style.y;i.style.y=e.style.y,t.addShape(i),i.__animating=!0,t.animate(i.id,"style").when(s,{y:n}).done(function(){i.__animating=!1}).start(o)}function o(t,e,i,s,o){var a=i.style.x,n=i.style.y,r=i.style.r0,h=i.style.r;if(i.__animating=!0,"r"!=i._animationAdd)i.style.r0=0,i.style.r=0,i.rotation=[2*Math.PI,a,n],t.addShape(i),t.animate(i.id,"style").when(s,{r0:r,r:h}).done(function(){i.__animating=!1}).start(o),t.animate(i.id,"").when(Math.round(s/3*2),{rotation:[0,a,n]}).start(o);else i.style.r0=i.style.r,t.addShape(i),t.animate(i.id,"style").when(s,{r0:r}).done(function(){i.__animating=!1}).start(o)}function a(t,i,s,o,a){if(!i)if("r"!=s._animationAdd)i={style:{startAngle:s.style.startAngle,endAngle:s.style.startAngle}};else i={style:{r0:s.style.r}};var n=s.style.startAngle,r=s.style.endAngle;e(s,i,"startAngle","endAngle"),t.addShape(s),s.__animating=!0,t.animate(s.id,"style").when(o,{startAngle:n,endAngle:r}).done(function(){s.__animating=!1}).start(a)}function n(t,i,s,o,a){if(!i)i={style:{x:"left"==s.style.textAlign?s.style.x+100:s.style.x-100,y:s.style.y}};var n=s.style.x,r=s.style.y;e(s,i,"x","y"),t.addShape(s),s.__animating=!0,t.animate(s.id,"style").when(o,{x:n,y:r}).done(function(){s.__animating=!1}).start(a)}function r(t,e,i,s,o){var a=require("zrender/shape/Polygon").prototype.getRect(i.style),n=a.x+a.width/2,r=a.y+a.height/2;i.scale=[.1,.1,n,r],t.addShape(i),i.__animating=!0,t.animate(i.id,"").when(s,{scale:[1,1,n,r]}).done(function(){i.__animating=!1}).start(o)}function h(t,i,s,o,a){if(!i)i={style:{source0:0,source1:s.style.source1>0?360:-360,target0:0,target1:s.style.target1>0?360:-360}};var n=s.style.source0,r=s.style.source1,h=s.style.target0,l=s.style.target1;if(i.style)e(s,i,"source0","source1","target0","target1");t.addShape(s),s.__animating=!0,t.animate(s.id,"style").when(o,{source0:n,source1:r,target0:h,target1:l}).done(function(){s.__animating=!1}).start(a)}function l(t,e,i,s,o){if(!e)e={style:{angle:i.style.startAngle}};var a=i.style.angle;i.style.angle=e.style.angle,t.addShape(i),i.__animating=!0,t.animate(i.id,"style").when(s,{angle:a}).done(function(){i.__animating=!1}).start(o)}function d(t,e,s,o,a,n){if(s.style._x=s.style.x,s.style._y=s.style.y,s.style._width=s.style.width,s.style._height=s.style.height,!e){var r=s._x||0,h=s._y||0;s.scale=[.01,.01,r,h],t.addShape(s),s.__animating=!0,t.animate(s.id,"").delay(n).when(o,{scale:[1,1,r,h]}).done(function(){s.__animating=!1}).start(a||"QuinticOut")}else i(t,e,s,o,a)}function p(t,i,s,o,a){if(!i)i={style:{xStart:s.style.xStart,yStart:s.style.yStart,xEnd:s.style.xStart,yEnd:s.style.yStart}};var n=s.style.xStart,r=s.style.xEnd,h=s.style.yStart,l=s.style.yEnd;e(s,i,"xStart","xEnd","yStart","yEnd"),t.addShape(s),s.__animating=!0,t.animate(s.id,"style").when(o,{xStart:n,xEnd:r,yStart:h,yEnd:l}).done(function(){s.__animating=!1}).start(a)}function c(t,e,i,s,o){o=o||"QuinticOut",i.__animating=!0,t.addShape(i);var a=i.style,n=function(){i.__animating=!1},r=a.xStart,h=a.yStart,l=a.xEnd,d=a.yEnd;if(a.curveness>0){i.updatePoints(a);var p={p:0},c=a.cpX1,g=a.cpY1,f=[],m=[],_=u.quadraticSubdivide;t.animation.animate(p).when(s,{p:1}).during(function(){_(r,c,l,p.p,f),_(h,g,d,p.p,m),a.cpX1=f[1],a.cpY1=m[1],a.xEnd=f[2],a.yEnd=m[2],t.modShape(i)}).done(n).start(o)}else t.animate(i.id,"style").when(0,{xEnd:r,yEnd:h}).when(s,{xEnd:l,yEnd:d}).done(n).start(o)}var g=require("zrender/tool/util"),u=require("zrender/tool/curve");return{pointList:t,rectangle:i,candle:s,ring:o,sector:a,text:n,polygon:r,ribbon:h,gaugePointer:l,icon:d,line:p,markline:c}});