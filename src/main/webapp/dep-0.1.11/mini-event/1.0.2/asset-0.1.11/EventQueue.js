define("mini-event/EventQueue",["require","./lib"],function(require){function e(e,t,i){return e&&e.handler===t&&e.thisObject==i}function t(){this.queue=[]}var i=require("./lib");return t.prototype.add=function(t,n){if(t!==!1&&"function"!=typeof t)throw new Error("event handler must be a function or const false");var a={handler:t};i.extend(a,n);for(var r=0;r<this.queue.length;r++){var o=this.queue[r];if(e(o,t,a.thisObject))return}this.queue.push(a)},t.prototype.remove=function(t,i){if(!t)return void this.clear();for(var n=0;n<this.queue.length;n++){var a=this.queue[n];if(e(a,t,i))return void(this.queue[n]=null)}},t.prototype.clear=function(){this.queue.length=0},t.prototype.execute=function(e,t){for(var i=this.queue,n=0;n<i.length;n++){if("function"==typeof e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())return;var a=i[n];if(a){var r=a.handler;if(r===!1){if("function"==typeof e.preventDefault)e.preventDefault();if("function"==typeof e.stopPropagation)e.stopPropagation()}else r.call(a.thisObject||t,e);if(a.once)this.remove(a.handler,a.thisObject)}else;}},t.prototype.getLength=function(){for(var e=0,t=0;t<this.queue.length;t++)if(this.queue[t])e++;return e},t.prototype.length=t.prototype.getLength,t.prototype.dispose=function(){this.clear(),this.queue=null},t});