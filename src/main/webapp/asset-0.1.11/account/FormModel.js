/*! 2015 Baidu Inc. All Rights Reserved */
define("account/FormModel",["require","common/GlobalData","er/Deferred","common/FormModel","eoo"],function(require){var e=require("common/GlobalData").getInstance(),t=require("er/Deferred"),exports={},i={user:function(){var t=e.getUser().then(function(e){return e});return t}};exports.constructor=function(){this.$super(arguments),this.putDatasource(i),this.set("entityDescription","修改密码")},exports.prepare=function(){this.$super(arguments)},exports.update=function(i){i=this.fillEntity(i);var n=this.validateEntity(i),r=i.oldPass,a=i.newPass,o=i.newAgainPass;if(a!==o)n.push({field:"newAgainPass",message:"与新密码不一致"});if(r===a)n.push({field:"newPass",message:"新密码应和旧密码不同"});if(n.length>0)return t.rejected({fields:n});else return e.updateUser(i)};var n=require("common/FormModel"),r=require("eoo").create(n,exports);return r});