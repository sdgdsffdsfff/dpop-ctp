/*! 2015 Baidu Inc. All Rights Reserved */
define("permission/ListModel",["require","common/util","er/datasource","./enum","er/Deferred","common/ListModel","eoo"],function(require){var e=require("common/util"),t="你确定要删除这些用户吗？该用户下的所有信息将被一并删除，删除后不可恢复。",i="你确定要删除该用户吗？该用户下的所有信息将被一并删除，删除后不可恢复。",n=require("er/datasource"),r=require("./enum").UserRole,exports={};exports.statusTransitions=[{status:0,deny:[0],statusName:"remove",command:"删除"},{status:1,statusName:"restore",command:"启用"},{status:2,accept:[3],statusName:"thaw",command:"解冻"},{status:3,accept:[2],statusName:"freeze",command:"冻结"}];var a={canBatchModify:n.constant(!0)},o=r.toArray(),s={roles:n.constant(o)};exports.constructor=function(){this.$super(arguments),this.putDatasource(a),this.putDatasource(s)},exports.prepare=function(){this.$super(arguments);var t=this.get("data").list;e.each(t,function(e){e.status=e.isFreezed+2})},exports.getQuery=function(){var e={id:this.get("id"),userName:this.get("keyword"),roleType:this.get("roleType"),size:this.get("size"),order:this.get("order"),orderBy:this.get("orderBy"),page:this.get("page")||1};return e},exports.getRemoveAdvice=function(n){var r=require("er/Deferred"),a=this.get("entityDescription"),o=t;if(1===n.length)o=i;var s={message:e.template(o,{entityDescription:a})};return r.resolved(s)},exports.getFilters=function(){var t=[];if(this.get("roleType"))t=this.get("roleType").split(",");var i=e.map(t,function(e){return r.getTextFromValue(e)});return{userRoles:{value:this.get("roleType"),text:i.join(", ")}}},exports.thaw=function(e){var t=this.data();return t.thaw(e||{})};var l=require("common/ListModel"),h=require("eoo").create(l,exports);return h});