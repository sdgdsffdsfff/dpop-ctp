/*! 2015 Baidu Inc. All Rights Reserved */
define("permission/FormView",["require","common/util","common/dom","tpl!b1c6f6b6.tpl.html","./enum","./schema","common/FormView","eoo"],function(require){function e(e){var t=r.getAliasFromValue(e);return t.indexOf("inner")}function t(){var e=r.getAliasFromValue(this.get("roleType").getValue());if("create"===this.model.get("formType"))if("innerMarker"===e||"innerAudit"===e)this.removeValidator();else this.resetValidator()}var i=require("common/util"),n=require("common/dom");require("tpl!b1c6f6b6.tpl.html");var r=require("./enum").UserRole,a=require("./schema"),exports={};exports.template="permissionForm",exports.getEntity=function(){var t=this.model.getValidator();if("inner"===this.model.get("userRoleType"))t.setSchema({}),this.model.setValidator(t);var n=this.$super(arguments);if(this.model.get("id"))n.id=parseInt(this.model.get("id"));else if(n.userName)if(n.userName=i.filter(n.userName.split("\n"),function(e){return""!==e}),e(n.roleType)>=0)delete n.password;return n},exports.uiEvents={"roleType:change":t},exports.removeValidator=function(){var e=this.model.getValidator();if(this.get("password")){var t=this.get("password").main.parentNode.parentNode;n.addClass(t,"hide-info"),this.get("password").setValue("1111111111"),e.setSchema({})}this.model.setValidator(e)},exports.resetValidator=function(){var e=this.model.getValidator();if(this.get("password")){var t=this.get("password").main.parentNode.parentNode;n.removeClass(t,"hide-info"),this.get("password").setValue(""),e.setSchema(a)}this.model.setValidator(e)},exports.enterDocument=function(){if(this.$super(arguments),"create"===this.model.get("formType"))this.removeValidator()};var o=require("common/FormView"),s=require("eoo").create(o,exports);return s});