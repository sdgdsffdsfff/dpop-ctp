/*! 2015 Baidu Inc. All Rights Reserved */
define("common/ListAction",["require","underscore","eoo","ub-ria/mvc/ListAction"],function(require){function e(){this.performSearch()}function t(e){var t=this.model.getItemById(e.id);this.modifyStatus([t],e.status)}function i(e){var t=this.model.getQuery();t.page=1,t.size=e.pageSize,this.reloadWithQueryUpdate(t)}function n(){var e=this.fire("pagechange");if(!e.isDefaultPrevented()){var t=this.model.getQuery();t.page=this.view.getPageIndex(),this.reloadWithQueryUpdate(t)}}function r(e){var t=this.view.getSelectedItems();this.modifyStatus(t,e.status)}function a(){var e=this.fire("tablesort");if(!e.isDefaultPrevented()){var t=this.getSearchQuery();t=s.extend(this.model.getQuery(),t),t.page=1,this.reloadWithQueryUpdate(t)}}function o(e){if("remove"===e.statusName)return void e.preventDefault();else return void s.each(e.ids,function(t){var i=this.model.getItemById(t);i.status=e.status,this.view.updateItem(i),e.preventDefault()},this)}var s=require("underscore"),exports={};exports.initBehavior=function(){this.view.on("search",e,this),this.view.on("pagesizechange",i,this),this.view.on("batchmodify",r,this),this.view.on("pagechange",n,this),this.view.on("tablesort",a,this),this.view.on("modifystatus",t,this),this.on("statusupdate",o,this)},exports.performSearch=function(){var e=this.model,t=e.get("filtersInfo").filters,i=s.omit(this.getSearchQuery(),s.keys(t)),n=this.fire("search");if(!n.isDefaultPrevented())i.page=1,this.reloadWithQueryUpdate(i)};var l=require("eoo").create(require("ub-ria/mvc/ListAction"),exports);return l});