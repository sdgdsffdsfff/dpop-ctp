/*! 2015 Baidu Inc. All Rights Reserved */
define("common/extension/mvc",["require","underscore","er/events","er/datasource","common/session","moment","ub-ria/mvc/ListModel","ub-ria/mvc/BaseView","esui","../mask"],function(require){function e(){var e=require("er/datasource");e.session=function(e){return function(){var t=require("common/session");return t.get(e)}},e.defaultValue=function(e,t){return function(i){return null==i.get(e)?t:i.get(e)}},e.enumText=function(e,t){return function(i,n){var a=i.get(t||n.name);if(null==a)return void 0;else return e.getTextFromValue(+a)}},e.formatDate=function(e,t){return e=e||"YYYY-MM-DD",function(i,n){var a=i.get(t||n.name);if(!a)return"";var r=require("moment");return r(a,"YYYYMMDD").format(e)}},e.user=function(e){return function(t){var i=t.data("global").getUser();return i[e]}},e.system=function(e){return function(t){var i=t.data("global").getSystem();return i[e]}}}function t(){var e=require("ub-ria/mvc/ListModel");e.prototype.getPageSize=function(){var e=this.data("global");if(!e)throw new Error("No global data object attached to this Model");return e.getUserProperty("pageSize")},e.prototype.updatePageSize=function(e){var t=this.data("global");if(!t)throw new Error("No global data object attached to this Model");return t.updatePageSize(e)};var t=require("ub-ria/mvc/BaseView");t.prototype.showToast=function(e,t){var i={content:e,disposeOnHide:!0,autoShow:!0,duration:3e3};a.extend(i,t);var n=require("esui").create("Toast",i);n.show()}}function i(){var e=require("../mask");r.on("forwardaction",function(t){if(!t.isChildAction)e.show()}),r.on("enteractioncomplete",function(t){if(!t.isChildAction)e.hide()}),r.on("enteractionfail",function(t){if(!t.isChildAction)e.hide()})}function n(){e(),t(),i()}var a=require("underscore"),r=require("er/events");return{enable:a.once(n)}});