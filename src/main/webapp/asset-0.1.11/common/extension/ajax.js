/*! 2015 Baidu Inc. All Rights Reserved */
define("common/extension/ajax",["require","underscore","er/ajax"],function(require){function e(){r.config.cache=!0,r.config.timeout=15e3,r.config.charset="utf-8"}function t(){var e={json:"application/json"};r.hooks.beforeExecute=function(t){if(t.contentType&&e.hasOwnProperty(t.contentType))t.contentType=e[t.contentType]}}function i(){function e(){i=!1}var t={403:{name:"not-authorized",title:"登录超时",message:"系统登录超时，请重新登录再试。",handler:function(){var e=window.DEBUG?"index-debug.html":"login.html";location.href=e+location.hash}},500:{name:"server-error",title:"系统错误",message:"系统发生错误，请稍后再试。"}},i=!1;r.on("fail",function(n){if(!n.options.background)if(!i){var a=t[n.xhr.status];if(a)i=!0,window.require(["esui/Dialog"],function(t){var i={title:a.title,content:a.message},n=t.alert(i);if(a.handler)n.on("ok",a.handler),n.on("ok",e),n.on("close",e)})}})}function n(){e(),t(),i()}var a=require("underscore"),r=require("er/ajax");return{enable:a.once(n)}});