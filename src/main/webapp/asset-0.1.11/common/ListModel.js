/*! 2015 Baidu Inc. All Rights Reserved */
define("common/ListModel",["require","./util","er/URL","eoo","ub-ria/mvc/ListModel"],function(require){function e(e,t){var n=e.get("url"),r=i.omit(n.getQuery(),t);return"#"+require("er/URL").withQuery(n.getPath(),r)}function t(e,t){var n=i.findWhere(this.getStatusTransitions(),{status:e});if(n.accept){var r=i.difference(n.accept,n.deny||[]);return i.contains(r,t.status)}else if(n.deny)return!i.contains(n.deny,t.status);else return!0}var i=require("./util"),exports={};exports.defaultStatusValue="all";var n={pageSize:function(e){var t=e.data("global");return t.getUser().then(function(e){return e.pageSize})}},r={hasResult:function(e){return e.get("data").list.length||!i.isEmpty(e.get("url").getQuery())}};exports.constructor=function(){this.$super(arguments),this.putDatasource(r,1),this.putDatasource(n,0)},exports.getAllItems=function(){return this.get("data").list},exports.setGlobalData=function(e){this.addData("global",e)},exports.getFiltersInfo=function(){var t=!0,n=this.getDefaultArgs(),r={};return i.each(this.getFilters(),function(a,o){var s={text:"function"==typeof a.text?a.text(a):a.text,clearURL:e(this,o),defaultValue:n[o]};if(i.defaults(s,a),s.isDefaultValue=s.hasOwnProperty("isDefaultValue")?s.isDefaultValue:s.defaultValue===s.value,!s.isDefaultValue)t=!1;r[o]=s},this),{filters:r,isAllFiltersDefault:t}},exports.canUpdateToStatus=function(e,n){return i.every(e,i.bind(t,this,n))};var a=require("eoo").create(require("ub-ria/mvc/ListModel"),exports);return a});