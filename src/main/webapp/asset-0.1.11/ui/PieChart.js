/*! 2015 Baidu Inc. All Rights Reserved */
define("ui/PieChart",["require","esui/lib","common/util","./BaseChart","esui/controlHelper","echarts/chart/pie","esui"],function(require){function e(){i.apply(this,arguments)}var t=require("esui/lib"),i=(require("common/util"),require("./BaseChart")),n=require("esui/controlHelper");return require("echarts/chart/pie"),t.inherits(e,i),e.prototype.type="PieChart",e.prototype.repaint=n.createRepaint(i.prototype.repaint),e.prototype.initChartOptions=function(){return{title:{text:this.get("title"),subtext:this.get("subtitle"),x:"center",y:30,textStyle:{color:"#666"},subtextStyle:{color:"#adadad"}},color:this.get("color").split(","),tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",x:"left",y:"center",data:this.get("datasource").legend},toolbox:{show:!0,feature:{}},calculable:!0,series:this.getSeriesFromDataSource()}},e.prototype.refresh=function(e,t){this.set("datasource",e),this.repaint(),this.chart.setSeries(this.getSeriesFromDataSource(),!0),this.chart.getDom().style.height=t,this.chart.resize(),this.chart.restore()},e.prototype.getSeriesFromDataSource=function(){var e,t=this.get("datasource");if(1==t.data.length)e=[{name:this.get("title"),type:"pie",radius:"55%",center:["50%","60%"],data:this.get("datasource").data[0]}];else if(2==t.data.length)e=[{name:t.name[0]+this.get("title"),type:"pie",radius:"55%",center:["25%","60%"],data:this.get("datasource").data[0]},{name:t.name[1]+this.get("title"),type:"pie",radius:"55%",center:["75%","60%"],data:this.get("datasource").data[1]}];return e},require("esui").register(e),e});