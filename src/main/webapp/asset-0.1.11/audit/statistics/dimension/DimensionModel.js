/*! 2015 Baidu Inc. All Rights Reserved */
define("audit/statistics/dimension/DimensionModel",["require","er/Deferred","common/util","ub-ria/mvc/BaseModel","eoo"],function(require){function e(e){var t=i.reduce(e,function(e,t){return e+t.value},0);return i.map(e,function(e){return 0===t?0:(e.value/t*100).toFixed(2)})}var t=require("er/Deferred"),i=require("common/util"),exports={},n={reviewTaskAccuracy:function(e){var t=e.getQuery(),i=e.data().getReviewTaskAccuracy(t).then(function(e){return e.data});return i}},a={reviewTagAccuracy:function(e){var t=e.getQuery(),i=e.data().getReviewTagAccuracy(t).then(function(e){return e.data});return i}};exports.constructor=function(){this.$super(arguments),this.putDatasource(n,0),this.putDatasource(a,1)},exports.getQuery=function(){return{reviewTaskId:this.get("reviewTaskId")||""}},exports.refreshDimension=function(e){var i=this.get("reviewTagAccuracy"),n=e.targetChart.prefix;if(1==e.toType)i[n].data.splice(1,1);else if(2==e.toType)i[n].data.push(i[n+"BeforeData"]);return t.resolved()},exports.prepare=function(){this.$super(arguments);var t=this.get("reviewTaskAccuracy"),i=this.get("reviewTagAccuracy");i.beautyBeforeData=[{value:i.tagHighBeautyNum,name:"高"},{value:i.tagNormalBeautyNum,name:"中"},{value:i.tagLowBeautyNum,name:"低"}],i.vulgarBeforeData=[{value:i.tagBlackVulgarNum,name:"黑"},{value:i.tagGrayVulagrNum,name:"灰"},{value:i.tagWhiteVulgarNum,name:"白"}],i.dangerBeforeData=[{value:i.tagIsCheatNum,name:"是"},{value:i.tagNotCheatNum,name:"否"}],i.cheatBeforeData=[{value:i.tagIsHighDangerNum,name:"是"},{value:i.tagNotHighDangerNum,name:"否"}],i.beauty={legend:["高","中","低"],name:["审核后","审核前"],data:[[{value:i.reviewHighBeautyNum,name:"高"},{value:i.reviewNormalBeautyNum,name:"中"},{value:i.reviewLowBeautyNum,name:"低"}],i.beautyBeforeData]},i.vulgar={legend:["黑","灰","白"],name:["审核后","审核前"],data:[[{value:i.reviewBlackVulgarNum,name:"黑"},{value:i.reviewGrayVulagrNum,name:"灰"},{value:i.reviewWhiteVulgarNum,name:"白"}],i.vulgarBeforeData]},i.danger={legend:["是","否"],name:["审核后","审核前"],data:[[{value:i.reviewIsCheatNum,name:"是"},{value:i.reviewNotCheatNum,name:"否"}],i.dangerBeforeData]},i.cheat={legend:["是","否"],name:["审核后","审核前"],data:[[{value:i.reviewIsHighDangerNum,name:"是"},{value:i.reviewNotHighDangerNum,name:"否"}],i.cheatBeforeData]},i.beautyRate={before:e(i.beautyBeforeData),after:e(i.beauty.data[0])},i.vulgarRate={before:e(i.vulgarBeforeData),after:e(i.vulgar.data[0])},i.dangerRate={before:e(i.dangerBeforeData),after:e(i.danger.data[0])},i.cheatRate={before:e(i.cheatBeforeData),after:e(i.cheat.data[0])},t.wuliao=[{name:"任务准确率",data:[t.taskAccuracy]},{name:"文字类准确率",data:[t.textAdAccuracy]},{name:"非文字类准确率",data:[t.otherAdAccuracy]}],t.tag=[{name:"所属行业准确率",data:[t.tradeAccuracy]},{name:"美观准确率",data:[t.beautyAccuracy]},{name:"低俗度准确率",data:[t.vulgarAccuracy]},{name:"欺诈度准确率",data:[t.cheatAccuracy]},{name:"高危度准确率",data:[t.highDangerAccuracy]}],t.taskAccuracy=t.taskAccuracy.toFixed(2)+"%",t.textAdAccuracy=t.textAdAccuracy.toFixed(2)+"%",t.otherAdAccuracy=t.otherAdAccuracy.toFixed(2)+"%",t.tradeAccuracy=t.tradeAccuracy.toFixed(2)+"%",t.beautyAccuracy=t.beautyAccuracy.toFixed(2)+"%",t.vulgarAccuracy=t.vulgarAccuracy.toFixed(2)+"%",t.cheatAccuracy=t.cheatAccuracy.toFixed(2)+"%",t.highDangerAccuracy=t.highDangerAccuracy.toFixed(2)+"%"};var r=require("ub-ria/mvc/BaseModel"),o=require("eoo").create(r,exports);return o});