/*! 2015 Baidu Inc. All Rights Reserved */
define("audit/Form",["require","esui/Toast","common/util","common/extension/FormWithSuccessHandler","common/FormAction","eoo"],function(require){var e=require("esui/Toast"),t=require("common/util"),i=require("common/extension/FormWithSuccessHandler"),n=new i,exports={};exports.entityDescription="新增审核任务",exports.initBehavior=function(){this.$super(arguments),this.setSubmitHandler(n);var i=this.view;i.on("syncHasSelectedList",t.bind(function(t){this.model.setSelectDatasource(t.rawValue,t.targetTree),this.view.refreshSelectUI(t.targetTree);var i=this.view.getEntity();if("trade-id"===t.targetTree.id||this.view.isTradePanelShow())this.model.data().getTagsByTradeIdList({tradeIds:i.reviewTaskCondition.adTradeType,taskType:i.taskType}).then(function(t){if(t.hasSuccess)this.model.setTagDatasource(t.data),this.view.syncTagGroupUI();else{var i=e.error(t.resultInfo);i.show()}}.bind(this))},this))},exports.redirectAfterSubmit=function(e){if(e.hasSuccess){var t="/"+this.getEntityName()+"/"+this.model.get("formType")+"/success~id="+e.data.id+"&taskName="+e.data.taskName+"&groupNumActual="+e.data.groupNumActual;if(e.data.groupNumActual<e.data.groupNum)this.redirect(t+"&groupNum="+e.data.groupNum);else this.redirect(t)}else this.redirect("/"+this.getEntityName()+"/"+this.model.get("formType")+"/success~error=error&resultInfo="+e.resultInfo)};var r=require("common/FormAction"),a=require("eoo").create(r,exports);return a});